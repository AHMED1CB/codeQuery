{% extends 'layouts/base.php.twig'%}


{% block title %}
	CodeQuery - Home
{% endblock %}


{% block content %}
	{% if app.user %}

		<div class="bg-[var(--color-card-bg)] text-white rounded-xl p-6 mb-8 shadow flex items-center justify-between">
			<div>
				<h1 class="text-2xl font-bold ">Welcome,
					{{ app.user.full_name }}
					<i class="ph ph-hand-waving"></i>
				</h1>
				<p class="text-gray-400 mt-1">Find answers to your technical questions and help others answer theirs.</p>
			</div>

			<a href="/ask" class="ml-4 px-5 py-2 bg-spotify-green text-black font-semibold rounded-lg hover:bg-green-400 transition">
				Ask
			</a>
		</div>
	{% endif %}


	<section class="bg-spotify-black text-white py-10 border rounded border-[var(--color-border)]">
		<div class="container mx-auto px-4">

			<h2 class="text-3xl font-bold mb-8  text-primary">Top Questions</h2>

			{% if app.contents.topQuestions %}

				<div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">

					{% for item in app.contents.topQuestions %}

						<div class="bg-[var(--color-card-bg)] rounded-xl p-6 shadow  transition">
							<div class="flex justify-between items-center mb-3">
								<span class="text-sm text-gray-400">{{item.answers_count}}
									answers</span>
								<span class="text-sm text-gray-400">{{item.votes_count}}
									votes</span>
							</div>
							<a href="/question/1" class="block text-xl font-semibold text-white ">
								{{item.title}}
							</a>
							<p class="text-sm text-gray-500 mt-2">asked
								{{item.creation_date}}</p>
						</div>

					{% endfor %}

				</div>

			{% else %}
				<h2 class="text-center text-lg w-full font-bold">No Questions On App Right now</h2>
			{% endif %}
			<div class="mt-8 text-center">
				<a href="/questions" class="inline-block px-6 py-3 bg-spotify-green text-black font-bold rounded-lg hover:bg-green-400 transition">
					Browse All Questions
				</a>
			</div>

		</div>
	</section>


	<section class="mt-12">
		<h2 class="text-2xl font-bold mb-6 text-primary">Popular Tags</h2>

		<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 p-6">

			{% if app.contents.popularTags %}

				{% for tag in app.contents.popularTags %}

					<div class="bg-gray-800 p-5 rounded-xl shadow hover:shadow-lg transition flex items-center">
						<img src="{{storage('lang/' ~ (tag.image ?? 'default.svg'))}}" alt="{{tag.name}}" class="w-10 h-10 mr-4">
						<div>
							<a href="/tags/{{tage.id}}" class="text-lg font-semibold text-white ">{{tag.name}}</a>
							<span class="text-gray-500 text-xs mt-1 block">{{tag.questions_count}}
								questions</span>
						</div>
					</div>

				{% endfor %}

			{% else %}
				<h2 class="text-center text-lg w-full font-bold">No Tags On App Right now</h2>


			{% endif %}

		</div>
	</section>


	<section
		class="bg-[var(--color-card-bg)] p-6 rounded-xl shadow border border-[var(--color-border)] mb-6">

		<!-- Section Title -->
		<h2 class="text-2xl font-bold text-[var(--color-primary)] mb-4">Popular Users</h2>

		<!-- Users List -->
		<div class="flex flex-wrap gap-3 ">

			{% if app.contents.popularUsers %}
				{% for user in app.contents.popularUsers %}

					<div class="flex  items-center bg-[var(--color-bg)] p-3 rounded-xl shadow border border-[var(--color-border)] hover:shadow-lg transition w-full lg:w-1/3">
						<img src="{{storage('images/' ~ user.avatar)}}" alt="User Avatar" class="w-12 h-12 rounded-full mr-3">
						<div>
							<h3 class="text-md font-semibold hover:text-[var(--color-accent)] cursor-pointer">{{user.full_name}}</h3>
							<div class="text-xs text-gray-400">Reputation: {{user.reputation}}</div>
						</div>
					</div>
				{% endfor %}

			{% endif %}

		</div>


	</section>
	{% if not app.user %}
		<section class="bg-[var(--color-card-bg)] border border-[var(--color-border)] rounded-2xl p-6 text-center shadow-sm">
			<h2 class="text-xl font-semibold text-[var(--color-text)] mb-3">
				Want to see more features?
			</h2>
			<p class="text-[var(--color-text)]/70 mb-6">
				Login to unlock full access, interact with the community, and ask your own questions.
			</p>
			<a href="/auth/login" class="inline-block bg-[var(--color-primary)] text-white px-6 py-2 rounded-full font-medium hover:bg-[var(--color-accent)] transition">
				Login for More
			</a>
		</section>

	{% endif %}

{% endblock %}
